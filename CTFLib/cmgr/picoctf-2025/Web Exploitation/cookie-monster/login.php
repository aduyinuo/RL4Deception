<?php

$flag_file = 'flag.txt';
$flag = @file_get_contents($flag_file);

if ($flag === false) {
    echo "Error reading the file.";
} else {
    $encoded_flag = base64_encode($flag);
    setcookie("secret_recipe", $encoded_flag, time() + 3600, "/");
}

if ($_SERVER["REQUEST_METHOD"] == "POST") {
    $username = $_POST['username'] ?? '';
    $password = $_POST['password'] ?? '';

    if ($username === 'admin' && $password === 'supersecret') {
        echo "<h1>Admin Panel</h1>";
        echo "<p>Welcome, admin! But the real secret isn't here...</p>";
        echo "<p>Hint: Cookie Monster loves his digital cookies!</p>";
    } else {
        echo "<h1>Access Denied</h1>";
        echo "<p>Cookie Monster says: 'Me no need password. Me just need cookies!'</p>";
        echo "<p>Hint: Have you checked your cookies lately?</p>";
    }
    echo "<a href='/'>Go back</a>";
} else {
    header("Location: /");
    exit;
}
?>